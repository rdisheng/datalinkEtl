(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01b30e67","chunk-2d0da943"],{"01ff":function(t,e,i){"use strict";i.d(e,"b",(function(){return r})),i.d(e,"a",(function(){return a}));i("b0c0");var r={javascript:{name:"JavaScript",editor:"javascript",default:"/**\n* 数据处理JavaScript脚本,方法名transform不可修改\n* 参数: data Object 输入数据\n* 返回值: data Object 输出数据\n*/\nfunction transform(data) {\n    // do somethings \n    return data;\n}"},groovy:{name:"Groovy",editor:"java",default:"/**\n* 数据处理Groovy脚本,方法名transform不可修改\n* 参数: data Object 输入数据\n* 返回值: data Object 输出数据\n*/\ndef transform(data) {\n    // do somethings \n    return data;\n}"}};function n(){var t=[];for(var e in r)t.push({name:r[e].name,value:e});return t}var a=n()},"6bcd":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{confirmLoading:t.confirmLoading,title:"脚本",width:800,visible:t.visible,footer:null,bodyStyle:{padding:0}},on:{cancel:t.onClose}},[e("div",{staticStyle:{"min-height":"400px"}},[e("a-table",{attrs:{columns:t.columns,"data-source":t.scriptList,size:"small",pagination:!1},scopedSlots:t._u([{key:"action",fn:function(i,r){return e("span",{},[e("a",{on:{click:function(e){return t.select(r)}}},[t._v("选择")])])}}])})],1)])},n=[],a=i("0fea"),o={name:"ScriptSelectModel",components:{},data:function(){return{visible:!1,confirmLoading:!1,url:{info:"/api/script/info",list:"/api/script/list"},columns:[{title:"名称",align:"center",dataIndex:"scriptName"},{title:"最后修改",align:"center",dataIndex:"updateTime"},{title:"操作",dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}],scriptList:[]}},methods:{show:function(t){var e=this;Object(a["d"])(this.url.list,{language:t}).then((function(t){200===t.code&&(e.scriptList=t.data)})),this.visible=!0},onClose:function(){this.visible=!1},select:function(t){var e=this;Object(a["c"])(this.url.info,{scriptId:t.scriptId}).then((function(t){e.$emit("select",t.data.scriptContent),e.visible=!1}))}}},s=o,c=i("2877"),l=Object(c["a"])(s,r,n,!1,null,"39f31296",null);e["default"]=l.exports},e57d:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t._self._c;return e("a-row",{attrs:{gutter:24}},[e("a-form-model",{ref:"propForm",attrs:{layout:"vertical",model:t.properties,rules:t.rules}},[e("a-col",{staticClass:"body",attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"脚本",prop:"script"}},[e("monaco-editor",{ref:"MonacoEditor",attrs:{height:"55vh","auto-init":!1}})],1)],1)],1),e("a-col",{attrs:{span:24}},[e("a-button",{attrs:{icon:"code"},on:{click:t.selectScript}},[t._v("选择脚本")])],1),e("script-select-model",{ref:"ScriptSelectModel",on:{select:t.onSelectedScript}})],1)},n=[],a=i("2200c"),o=i("01ff"),s=i("6bcd"),c={components:{ScriptSelectModel:s["default"],MonacoEditor:a["a"]},data:function(){return{scriptLanguageMap:o["b"],properties:{},rules:{script:[{required:!0,validator:this.checkEditor,message:"请输入脚本",trigger:"blur"}]}}},props:{param:{type:Object,default:{}}},mounted:function(){this.properties.language=this.param.language},methods:{set:function(t){var e=this;this.properties=Object.assign({},this.properties,t),this.properties.script||(this.properties.script=this.scriptLanguageMap[this.properties.language].default),this.$nextTick((function(){e.$refs.MonacoEditor.init(e.properties.script,e.scriptLanguageMap[e.properties.language].editor)}))},get:function(t){this.properties.script=this.$refs.MonacoEditor.get();var e=this;this.$refs.propForm.validate((function(i){return i?t(!0,e.properties):t(!1)}))},checkEditor:function(t,e,i){var r=this.$refs.MonacoEditor.get();return r?i():i(new Error)},selectScript:function(){this.$refs.ScriptSelectModel.show(this.properties.language)},onSelectedScript:function(t){this.$refs.MonacoEditor.set(t)}}},l=c,p=i("2877"),u=Object(p["a"])(l,r,n,!1,null,null,null);e["default"]=u.exports}}]);