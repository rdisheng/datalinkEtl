(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aad48"],{"134d":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("page-header-wrapper",{attrs:{breadcrumb:!1}},[e("a-card",{staticStyle:{"margin-bottom":"15px"},attrs:{"body-style":{paddingBottom:0},bordered:!1}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:7,sm:24}},[e("a-form-item",{attrs:{label:"插件名称"}},[e("a-input",{attrs:{placeholder:"请输入插件名称"},model:{value:t.queryParam.pluginName,callback:function(e){t.$set(t.queryParam,"pluginName",e)},expression:"queryParam.pluginName"}})],1)],1),e("a-col",{attrs:{md:14,sm:24}},[e("a-button",{attrs:{type:"primary"},on:{click:t.loadData}},[t._v("查询")]),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.reset}},[t._v("重置")])],1),e("a-col",{staticStyle:{"text-align":"right"},attrs:{md:3,sm:24}},[e("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.handleAdd()}}},[t._v("新建插件")])],1)],1)],1)],1)]),e("a-card",{attrs:{"body-style":{minHeight:"500px"},bordered:!1}},[e("a-table",{ref:"table",attrs:{rowKey:"pluginId",columns:t.columns,"data-source":t.dataSource,pagination:!1,loading:t.loading},scopedSlots:t._u([{key:"serial",fn:function(a,o,n){return e("span",{},[t._v(" "+t._s(n+1)+" ")])}},{key:"action",fn:function(a,o){return e("span",{},[[e("a",{on:{click:function(e){return t.handleEdit(o)}}},[t._v("编辑")]),e("a-divider",{attrs:{type:"vertical"}}),t.dataSource.length?e("a-popconfirm",{attrs:{title:"删除此插件?"},on:{confirm:function(){return t.handleDelete(o)}}},[e("a",{attrs:{href:"javascript:;"}},[t._v("删除")])]):t._e()]],2)}}])})],1),e("plugin-model",{ref:"PluginModel",on:{ok:t.loadData}})],1)},n=[],l=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("0fea")),i=(a("a4d3"),a("e01a"),function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{confirmLoading:t.confirmLoading,title:"插件",width:600,visible:t.visible,destroyOnClose:!0},on:{cancel:t.onClose}},[e("a-form-model",{ref:"ruleForm",attrs:{model:t.modal,layout:"vertical",rules:t.rules}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"插件名称",prop:"pluginName"}},[e("a-input",{attrs:{placeholder:"请输入插件名称"},model:{value:t.modal.pluginName,callback:function(e){t.$set(t.modal,"pluginName",e)},expression:"modal.pluginName"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"输入端口",prop:"inputCount"}},[e("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"输入端口数量",step:1,min:0,max:1},model:{value:t.modal.inputCount,callback:function(e){t.$set(t.modal,"inputCount",e)},expression:"modal.inputCount"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"输出端口",prop:"outputCount"}},[e("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"输出端口数量",step:1,min:0,max:5},model:{value:t.modal.outputCount,callback:function(e){t.$set(t.modal,"outputCount",e)},expression:"modal.outputCount"}})],1)],1),e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"包路径",prop:"packagePath"}},[e("a-input",{attrs:{placeholder:"请输入包路径"},model:{value:t.modal.packagePath,callback:function(e){t.$set(t.modal,"packagePath",e)},expression:"modal.packagePath"}})],1)],1),e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"插件文件",prop:"fileName"}},[e("a-input",{staticStyle:{display:"inline-block",width:"80%"},attrs:{placeholder:"请上传插件文件","read-only":!0},model:{value:t.modal.fileName,callback:function(e){t.$set(t.modal,"fileName",e)},expression:"modal.fileName"}}),e("a-upload",{staticStyle:{display:"inline-block",width:"20%"},attrs:{showUploadList:!1,beforeUpload:function(e){return t.checkFile(e,100,["jar"])},customRequest:t.customRequest},on:{change:t.handlerUpload}},[e("a-button",{staticStyle:{width:"100px","margin-left":"10px"}},[e("a-icon",{attrs:{type:"upload"}}),t._v(" 上传 ")],1)],1)],1)],1),e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"说明"}},[e("a-textarea",{attrs:{rows:3,placeholder:"请输入说明"},model:{value:t.modal.description,callback:function(e){t.$set(t.modal,"description",e)},expression:"modal.description"}})],1)],1)],1)],1),e("div",{staticClass:"bottom-button"},[e("a-button",{style:{marginRight:"8px"},on:{click:t.onClose}},[t._v(" 取消")]),e("a-button",{attrs:{type:"primary"},on:{click:t.handleOk}},[t._v(" 确定")])],1)],1)}),r=[],s=(a("b0c0"),a("ca00")),d={name:"PluginModel",data:function(){return{title:"操作",visible:!1,confirmLoading:!1,modal:{pluginName:"",inputCount:1,outputCount:1,fileName:""},url:{add:"/api/plugin/add",update:"/api/plugin/update"},rules:{pluginName:[{required:!0,message:"请输入插件名称",trigger:"blur"}],inputCount:[{required:!0,message:"请设置输入端口数量",trigger:"change"}],outputCount:[{required:!0,message:"请设置输出端口数量",trigger:"change"}],packagePath:[{required:!0,message:"请输入包路径",trigger:"blur"}],fileName:[{required:!0,message:"请上传插件文件",trigger:"blur"}]}}},methods:{checkFile:s["a"],add:function(){this.edit({})},edit:function(t){this.modal=Object.assign({},this.modal,t),this.visible=!0},onClose:function(){this.modal={pluginName:""},this.visible=!1},handleOk:function(){var t=this,e=this;this.$refs.ruleForm.validate((function(a){if(!a)return!1;var o;e.confirmLoading=!0,o=t.modal.pluginId?Object(l["e"])(t.url.update,t.modal):Object(l["d"])(t.url.add,t.modal),o.then((function(t){200===t.code?(e.$message.success("保存成功"),e.$emit("ok")):e.$message.error("保存失败")})).finally((function(){e.confirmLoading=!1,e.onClose()}))}))},filterOption:function(t,e){return!!e.componentOptions.children[0].text&&e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},handlerUpload:function(t){t.file.status,"done"===t.file.status?200===t.file.response.code?(this.modal.fileName=t.file.response.data.fileName,this.$message.success("".concat(t.file.name," 上传成功"))):this.$message.error("上传出错,".concat(t.file.response.message)):"error"===t.file.status&&this.$message.error("上传出错")},customRequest:function(t){var e=new FormData;e.append("file",t.file),Object(l["f"])("/api/plugin/upload",e).then((function(e){t.onSuccess(e,t.file)}))}}},u=d,c=a("2877"),m=Object(c["a"])(u,i,r,!1,null,"20bf2273",null),p=m.exports,f={name:"ScriptList",components:{PluginModel:p},data:function(){return{columns:[{title:"插件名称",dataIndex:"pluginName"},{title:"文件名",dataIndex:"fileName"},{title:"包路径",dataIndex:"packagePath"},{title:"最后修改",dataIndex:"updateTime"},{title:"操作",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],dataSource:[],loading:!0,queryParam:{}}},mounted:function(){this.loadData()},methods:{loadData:function(){var t=this;this.loading=!0,Object(l["d"])("/api/plugin/list",this.queryParam).then((function(e){t.dataSource=e.data,t.loading=!1}))},handleDelete:function(t){var e=this;Object(l["d"])("/api/plugin/remove",t).then((function(t){200===t.code?(e.$message.success("删除成功"),e.loadData()):e.$message.error(t.message)}))},handleAdd:function(){this.$refs.PluginModel.add()},handleEdit:function(t){this.$refs.PluginModel.edit(t)},reset:function(){this.queryParam={},this.loadData()},download:function(t){Object(l["a"])("/api/plugin/download",{fileName:t.fileName}).then((function(e){var a=new Blob([e]),o=document.createElement("a"),n=window.URL.createObjectURL(a);o.href=n,o.download=decodeURIComponent(t.fileName),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(n)}))}}},g=f,h=Object(c["a"])(g,o,n,!1,null,null,null);e["default"]=h.exports}}]);