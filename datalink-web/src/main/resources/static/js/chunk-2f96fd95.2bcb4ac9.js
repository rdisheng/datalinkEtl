(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f96fd95","chunk-baff7d88"],{"1c9d":function(e,r,t){"use strict";t.r(r);var o=function(){var e=this,r=e._self._c;return r("a-form-model-item",{attrs:{label:"用户属性",prop:"paramContent"}},[r("div",{staticStyle:{"margin-top":"-30px",width:"100%","text-align":"right",height:"30px",color:"#000000","padding-top":"4px"}},[r("a",{on:{click:e.newItem}},[e._v("添加")])]),r("a-table",{staticStyle:{border:"1px #e8e3e3 solid"},attrs:{columns:e.columns,dataSource:e.data,pagination:!1,loading:e.loading,size:"small"},scopedSlots:e._u([e._l(["name","value"],(function(t,o){return{key:t,fn:function(a,n){return[n.editable?r("a-input",{key:t,staticStyle:{margin:"-5px 0"},attrs:{value:a,placeholder:"请输入"+e.columns[o].title},on:{change:function(r){return e.handleChange(r.target.value,n.key,t)}}}):[e._v(e._s(a))]]}}})),{key:"action",fn:function(t,o){return[o.editable?[o.isNew?r("span",[r("a",{on:{click:function(r){return e.saveRow(o)}}},[e._v("确定")]),r("a-divider",{attrs:{type:"vertical"}}),r("a-popconfirm",{attrs:{title:"删除此用户属性？"},on:{confirm:function(r){return e.remove(o.key)}}},[r("a",[e._v("删除")])])],1):r("span",[r("a",{on:{click:function(r){return e.saveRow(o)}}},[e._v("保存")]),r("a-divider",{attrs:{type:"vertical"}}),r("a",{on:{click:function(r){return e.cancel(o.key)}}},[e._v("取消")])],1)]:r("span",[r("a",{on:{click:function(r){return e.toggle(o.key)}}},[e._v("编辑")]),r("a-divider",{attrs:{type:"vertical"}}),r("a-popconfirm",{attrs:{title:"删除此用户属性？"},on:{confirm:function(r){return e.remove(o.key)}}},[r("a",[e._v("删除")])])],1)]}}],null,!0)})],1)},a=[],n=t("2909"),i=t("5530"),s=t("b85c"),p=(t("b64b"),t("b0c0"),t("d3b7"),t("25f0"),t("4de4"),t("7db0"),t("159b"),{name:"HttpHeadersModel",data:function(){return{loading:!1,data:[],columns:[{title:"键",dataIndex:"name",key:"name",width:"40%",scopedSlots:{customRender:"name"}},{title:"值",dataIndex:"value",key:"value",width:"40%",scopedSlots:{customRender:"value"}},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}]}},methods:{set:function(e){if(this.data=[],e)for(var r=Object.keys(e),t=1,o=0,a=r;o<a.length;o++){var n=a[o];this.data.push({key:t++,name:n,value:e[n],editable:!1,isNew:!1})}},get:function(){var e,r={},t=Object(s["a"])(this.data);try{for(t.s();!(e=t.n()).done;){var o=e.value;r[o.name]=o.value}}catch(a){t.e(a)}finally{t.f()}return r},newItem:function(){var e=this.data.length;this.data.push({key:0===e?"1":(parseInt(this.data[e-1].key)+1).toString(),name:"",value:"",editable:!0,isNew:!0})},remove:function(e){this.data=this.data.filter((function(r){return r.key!==e}))},saveRow:function(e){this.loading=!0;var r=e.key,t=e.name,o=e.value;if(!t||!o)return this.loading=!1,void this.$message.error("填写不完整");var a=this.data.find((function(e){return e.key===r}));a.editable=!1,a.isNew=!1,this.loading=!1},toggle:function(e){var r=this.data.find((function(r){return r.key===e}));r._originalData=Object(i["a"])({},r),r.editable=!r.editable},cancel:function(e){var r=this.data.find((function(r){return r.key===e}));Object.keys(r).forEach((function(e){r[e]=r._originalData[e]})),r._originalData=void 0},handleChange:function(e,r,t){var o=Object(n["a"])(this.data),a=o.find((function(e){return r===e.key}));a&&(a[t]=e,this.data=o)}}}),c=p,l=t("2877"),u=Object(l["a"])(c,o,a,!1,null,null,null);r["default"]=u.exports},2909:function(e,r,t){"use strict";t.d(r,"a",(function(){return p}));var o=t("6b75");function a(e){if(Array.isArray(e))return Object(o["a"])(e)}t("a4d3"),t("e01a"),t("d3b7"),t("d28b"),t("3ca3"),t("ddb0"),t("a630");function n(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var i=t("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e){return a(e)||n(e)||Object(i["a"])(e)||s()}},"3e57":function(e,r,t){"use strict";t.r(r);var o=function(){var e=this,r=e._self._c;return r("a-row",{attrs:{gutter:24}},[r("a-form-model",{ref:"propForm",attrs:{layout:"vertical",model:e.properties,rules:e.rules}},[r("a-col",{attrs:{span:24}},[r("a-form-model-item",{attrs:{label:"资源",prop:"resourceId"}},[r("node-resource-select",{attrs:{"resource-type":e.param.resourceType},on:{change:function(r){return e.properties=Object.assign({},e.properties,r.properties)}},model:{value:e.properties.resourceId,callback:function(r){e.$set(e.properties,"resourceId",r)},expression:"properties.resourceId"}})],1)],1),r("a-col",{attrs:{span:24}},[r("a-form-model-item",{attrs:{label:"SOURCE"===e.param.driverMode?"订阅Topic":"发布Topic",prop:"topic"}},[r("a-input",{attrs:{placeholder:"请输入Topic"},model:{value:e.properties.topic,callback:function(r){e.$set(e.properties,"topic",r)},expression:"properties.topic"}},["SOURCE"===e.param.driverMode?r("a-tooltip",{attrs:{slot:"suffix",title:"可订阅单个或多个主题，订阅多主题时，请使用逗号分隔（,）"},slot:"suffix"},[r("a-icon",{staticStyle:{color:"rgba(92,92,92,0.45)"},attrs:{type:"info-circle"}})],1):e._e()],1)],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"Qos",prop:"qos"}},[r("a-select",{attrs:{placeholder:"请选择Qos"},model:{value:e.properties.qos,callback:function(r){e.$set(e.properties,"qos",r)},expression:"properties.qos"}},[r("a-select-option",{attrs:{value:0}},[e._v("0")]),r("a-select-option",{attrs:{value:1}},[e._v("1")]),r("a-select-option",{attrs:{value:2}},[e._v("2")])],1)],1)],1),"SOURCE"===e.param.driverMode?r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"共享订阅",prop:"share"}},[r("bool-select",{attrs:{placeholder:"请选择是否共享订阅"},model:{value:e.properties.share,callback:function(r){e.$set(e.properties,"share",r)},expression:"properties.share"}})],1)],1):e._e(),"SOURCE"===e.param.driverMode&&5===e.properties.version?r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"No Local",prop:"noLocal"}},[r("bool-select",{attrs:{placeholder:"No Local flag"},model:{value:e.properties.noLocal,callback:function(r){e.$set(e.properties,"noLocal",r)},expression:"properties.noLocal"}})],1)],1):e._e(),"SOURCE"===e.param.driverMode&&5===e.properties.version?r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"Retain As Publish",prop:"retainAsPublished"}},[r("bool-select",{attrs:{placeholder:"Retain as Published flag"},model:{value:e.properties.retainAsPublished,callback:function(r){e.$set(e.properties,"retainAsPublished",r)},expression:"properties.retainAsPublished"}})],1)],1):e._e(),"SOURCE"===e.param.driverMode&&5===e.properties.version?r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"Retain Handling",prop:"retainHandling"}},[r("a-select",{attrs:{placeholder:"Retain Handling"},model:{value:e.properties.retainHandling,callback:function(r){e.$set(e.properties,"retainHandling",r)},expression:"properties.retainHandling"}},[r("a-select-option",{attrs:{value:0}},[e._v("0")]),r("a-select-option",{attrs:{value:1}},[e._v("1")]),r("a-select-option",{attrs:{value:2}},[e._v("2")])],1)],1)],1):e._e(),"TARGET"===e.param.driverMode?r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"消息保留",prop:"retained"}},[r("bool-select",{attrs:{placeholder:"请选择是否消息保留"},model:{value:e.properties.retained,callback:function(r){e.$set(e.properties,"retained",r)},expression:"properties.retained"}})],1)],1):e._e(),"TARGET"===e.param.driverMode?r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"连接池大小",prop:"maxTotal"}},[r("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入连接池大小"},model:{value:e.properties.maxTotal,callback:function(r){e.$set(e.properties,"maxTotal",r)},expression:"properties.maxTotal"}})],1)],1):e._e(),"TARGET"===e.param.driverMode?r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"最大空闲",prop:"maxIdle"}},[r("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入最大空闲数"},model:{value:e.properties.maxIdle,callback:function(r){e.$set(e.properties,"maxIdle",r)},expression:"properties.maxIdle"}})],1)],1):e._e(),"TARGET"===e.param.driverMode?r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"最小空闲",prop:"minIdle"}},[r("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入最小空闲数"},model:{value:e.properties.minIdle,callback:function(r){e.$set(e.properties,"minIdle",r)},expression:"properties.minIdle"}})],1)],1):e._e(),"TARGET"===e.param.driverMode&&5===e.properties.version?r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"消息过期时间(秒)",prop:"messageExpiryInterval"}},[r("a-input",{attrs:{placeholder:"请输入消息过期时间"},model:{value:e.properties.messageExpiryInterval,callback:function(r){e.$set(e.properties,"messageExpiryInterval",r)},expression:"properties.messageExpiryInterval"}})],1)],1):e._e(),"TARGET"===e.param.driverMode&&5===e.properties.version?r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"有效载荷标识",prop:"payloadFormat"}},[r("bool-select",{attrs:{placeholder:"请选择有效载荷标识"},model:{value:e.properties.payloadFormat,callback:function(r){e.$set(e.properties,"payloadFormat",r)},expression:"properties.payloadFormat"}})],1)],1):e._e(),"TARGET"===e.param.driverMode&&5===e.properties.version?r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"内容类型",prop:"contentType"}},[r("a-input",{attrs:{placeholder:"请输入内容类型"},model:{value:e.properties.contentType,callback:function(r){e.$set(e.properties,"contentType",r)},expression:"properties.contentType"}})],1)],1):e._e(),"TARGET"===e.param.driverMode&&5===e.properties.version?r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"主题别名",prop:"topicAlias"}},[r("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入主题别名"},model:{value:e.properties.topicAlias,callback:function(r){e.$set(e.properties,"topicAlias",r)},expression:"properties.topicAlias"}})],1)],1):e._e(),5===e.properties.version?r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"数据订阅标识符",prop:"subscriptionIdentifier"}},[r("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入数据订阅标识符"},model:{value:e.properties.subscriptionIdentifier,callback:function(r){e.$set(e.properties,"subscriptionIdentifier",r)},expression:"properties.subscriptionIdentifier"}})],1)],1):e._e(),"TARGET"===e.param.driverMode&&5===e.properties.version?r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"响应主题",prop:"responseTopic"}},[r("a-input",{attrs:{placeholder:"请输入响应主题"},model:{value:e.properties.responseTopic,callback:function(r){e.$set(e.properties,"responseTopic",r)},expression:"properties.responseTopic"}})],1)],1):e._e(),"TARGET"===e.param.driverMode&&5===e.properties.version?r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"对比数据",prop:"correlationData"}},[r("a-input",{attrs:{placeholder:"请输入对比数据"},model:{value:e.properties.correlationData,callback:function(r){e.$set(e.properties,"correlationData",r)},expression:"properties.correlationData"}})],1)],1):e._e(),"TARGET"===e.param.driverMode?r("a-col",{staticClass:"payload",attrs:{span:24}},[r("a-form-model-item",{attrs:{label:"消息模板"}},[r("monaco-editor",{ref:"MonacoEditor",attrs:{language:"freemarker2"}})],1)],1):e._e(),"TARGET"===e.param.driverMode&&5===e.properties.version?r("a-col",{staticClass:"payload",attrs:{span:24}},[r("mqtt-user-properties-model",{ref:"MqttUserPropertiesModel"})],1):e._e()],1)],1)},a=[],n=t("2200c"),i=t("1c9d"),s=t("f6ed"),p={components:{NodeResourceSelect:s["a"],MonacoEditor:n["a"],MqttUserPropertiesModel:i["default"]},data:function(){return{properties:{},sourceDefaultValue:{qos:0,share:!1,noLocal:!1,retainAsPublished:!1,retainHandling:0},destDefaultValue:{qos:0,maxTotal:8,maxIdle:8,minIdle:4,retained:!1,payloadFormat:!1},rules:{resourceId:[{required:!0,message:"请选择资源",trigger:"change"}],topic:[{required:!0,message:"请输入Topic",trigger:"blur"}],retained:[{required:!0,message:"请选择是否消息保留",trigger:"change"}],share:[{required:!0,message:"请选择是否共享订阅",trigger:"change"}],qos:[{required:!0,message:"请选择Qos",trigger:"change"}],maxTotal:[{required:!0,message:"请输入连接池大小",trigger:"blur"}],maxIdle:[{required:!0,message:"请输入最大空闲数",trigger:"blur"}],minIdle:[{required:!0,message:"请输入最小空闲数",trigger:"blur"}]},resourceList:[],url:{resourceList:"/api/resource/list"}}},props:{param:{type:Object,default:{}}},mounted:function(){this.properties=Object.assign({},"SOURCE"===this.param.driverMode?this.sourceDefaultValue:this.destDefaultValue),this.properties.driverMode=this.param.driverMode,this.properties.resourceType=this.param.resourceType},methods:{set:function(e){var r=this;delete this.properties.version,this.properties=Object.assign({},this.properties,e),"TARGET"===this.param.driverMode&&this.$nextTick((function(){r.$refs.MonacoEditor.set(r.properties.payload),5===r.properties.version&&r.$refs.MqttUserPropertiesModel.set(r.properties.userProperties)}))},get:function(e){"TARGET"===this.param.driverMode?(this.properties.payload=this.$refs.MonacoEditor.get(),5===this.properties.version?this.properties.userProperties=this.$refs.MqttUserPropertiesModel.get():(delete this.properties.messageExpiryInterval,delete this.properties.payloadFormat,delete this.properties.contentType,delete this.properties.topicAlias,delete this.properties.subscriptionIdentifier,delete this.properties.responseTopic,delete this.properties.correlationData)):"SOURCE"===this.param.driverMode&&5!==this.properties.version&&(delete this.properties.noLocal,delete this.properties.retainAsPublished,delete this.properties.retainHandling,delete this.properties.subscriptionIdentifier);var r=this;this.$refs.propForm.validate((function(t){return t?e(!0,r.properties):e(!1)}))}}},c=p,l=t("2877"),u=Object(l["a"])(c,o,a,!1,null,null,null);r["default"]=u.exports},"56fc":function(e,r,t){"use strict";t.d(r,"b",(function(){return s})),t.d(r,"d",(function(){return c})),t.d(r,"c",(function(){return d})),t.d(r,"a",(function(){return f}));t("99af"),t("b0c0"),t("4de4"),t("d3b7"),t("d81d");var o=t("995a"),a={CHANNEL:"消息通道",PROTOCOL:"通讯协议",DATABASE:"数据存储"},n={MQTT:{name:"MQTT",type:"all",group:"CHANNEL",component:"MqttProperties",details:{resource:{name:"地址",value:function(e){return e.properties.url}},rule:[{name:"地址",value:function(e){return e.properties.url}},{name:"Topic",value:function(e){return e.properties.topic}}]}},SNMP:{name:"SNMP",type:"source",group:"PROTOCOL",component:"SnmpProperties",details:{resource:{name:"地址",value:function(e){return"udp:".concat(e.properties.ip,"/").concat(e.properties.port)}},rule:[{name:"地址",value:function(e){return"udp:".concat(e.properties.ip,"/").concat(e.properties.port)}},{name:"读取点位",value:function(e){return e.properties.points?e.properties.points.length:void 0}},{name:"启动延迟",value:function(e){return e.properties.initialDelay?"".concat(e.properties.initialDelay).concat(o["b"][e.properties.initialDelayUnit]):void 0}},{name:"Cron表达式",value:function(e){return e.properties.cronExpression}}]}},KAFKA:{name:"Kafka",type:"all",group:"CHANNEL",component:"KafkaProperties",details:{resource:{name:"地址",value:function(e){return"".concat(e.properties.url)}},rule:[{name:"地址",value:function(e){return"".concat(e.properties.url)}},{name:"Topic",value:function(e){return e.properties.topic}}]}},RABBITMQ:{name:"RabbitMQ",type:"all",group:"CHANNEL",component:"RabbitMQProperties",details:{resource:{name:"地址",value:function(e){return"".concat(e.properties.ip,":").concat(e.properties.port)}},rule:[{name:"地址",value:function(e){return"".concat(e.properties.ip,":").concat(e.properties.port)}},{name:"虚拟主机",value:function(e){return e.properties.virtualHost}},{name:"交换机",value:function(e){return e.properties.exchange}},{name:"队列",value:function(e){return e.properties.queue}}]}},ROCKETMQ:{name:"RocketMQ",type:"all",group:"CHANNEL",component:"RocketMQProperties",details:{resource:{name:"地址",value:function(e){return"".concat(e.properties.url)}},rule:[{name:"地址",value:function(e){return"".concat(e.properties.url)}},{name:"分组",value:function(e){return e.properties.group}},{name:"Topic",value:function(e){return e.properties.topic}}]}},ACTIVEMQ:{name:"ActiveMQ",type:"all",group:"CHANNEL",component:"ActiveMQProperties",details:{resource:{name:"地址",value:function(e){return"".concat(e.properties.url)}},rule:[{name:"地址",value:function(e){return"".concat(e.properties.url)}},{name:function(e){return"queue"===e.properties.model?"Queue":"Topic"},value:function(e){return"queue"===e.properties.model?e.properties.queue:e.properties.topic}}]}},MYSQL:{name:"MySQL",type:"all",group:"DATABASE",component:"JdbcProperties",details:{resource:{name:"地址",value:function(e){return"".concat(e.properties.ip,":").concat(e.properties.port,"/").concat(e.properties.databaseName)}},rule:[{name:"地址",value:function(e){return"".concat(e.properties.ip,":").concat(e.properties.port,"/").concat(e.properties.databaseName)}},{name:"SQL模板",value:function(e){return e.properties.sql}},{name:"启动延迟",value:function(e){return e.properties.initialDelay?"".concat(e.properties.initialDelay).concat(o["b"][e.properties.initialDelayUnit]):void 0}},{name:"Cron表达式",value:function(e){return e.properties.cronExpression}}]}},POSTGRESQL:{name:"PostgreSQL",type:"all",group:"DATABASE",component:"JdbcProperties",details:{resource:{name:"地址",value:function(e){return"".concat(e.properties.ip,":").concat(e.properties.port,"/").concat(e.properties.databaseName)}},rule:[{name:"地址",value:function(e){return"".concat(e.properties.ip,":").concat(e.properties.port,"/").concat(e.properties.databaseName)}},{name:"SQL模板",value:function(e){return e.properties.sql}},{name:"启动延迟",value:function(e){return e.properties.initialDelay?"".concat(e.properties.initialDelay).concat(o["b"][e.properties.initialDelayUnit]):void 0}},{name:"Cron表达式",value:function(e){return e.properties.cronExpression}}]}},SQLSERVER:{name:"SQL Server",type:"all",group:"DATABASE",component:"JdbcProperties",details:{resource:{name:"地址",value:function(e){return"".concat(e.properties.ip,":").concat(e.properties.port,"/").concat(e.properties.databaseName)}},rule:[{name:"地址",value:function(e){return"".concat(e.properties.ip,":").concat(e.properties.port,"/").concat(e.properties.databaseName)}},{name:"SQL模板",value:function(e){return e.properties.sql}},{name:"启动延迟",value:function(e){return e.properties.initialDelay?"".concat(e.properties.initialDelay).concat(o["b"][e.properties.initialDelayUnit]):void 0}},{name:"Cron表达式",value:function(e){return e.properties.cronExpression}}]}},TDENGINE:{name:"TDengine",type:"all",group:"DATABASE",component:"JdbcProperties",details:{resource:{name:"地址",value:function(e){return"".concat(e.properties.ip,":").concat(e.properties.port,"/").concat(e.properties.databaseName)}},rule:[{name:"地址",value:function(e){return"".concat(e.properties.ip,":").concat(e.properties.port,"/").concat(e.properties.databaseName)}},{name:"SQL模板",value:function(e){return e.properties.sql}},{name:"启动延迟",value:function(e){return e.properties.initialDelay?"".concat(e.properties.initialDelay).concat(o["b"][e.properties.initialDelayUnit]):void 0}},{name:"Cron表达式",value:function(e){return e.properties.cronExpression}}]}},OPCUA:{name:"OPC UA",type:"all",group:"PROTOCOL",component:"OpcUAProperties",details:{resource:{name:"地址",value:function(e){return"".concat(e.properties.ip,":").concat(e.properties.port)}},rule:[{name:"地址",value:function(e){return"opc.tcp://".concat(e.properties.ip,":").concat(e.properties.port)}},{name:"读取点位",value:function(e){return e.properties.points?e.properties.points.length:void 0}},{name:"启动延迟",value:function(e){return e.properties.initialDelay?"".concat(e.properties.initialDelay).concat(o["b"][e.properties.initialDelayUnit]):void 0}},{name:"Cron表达式",value:function(e){return e.properties.cronExpression}},{name:"点位地址",value:function(e){return e.properties.address}},{name:"数据值",value:function(e){return e.properties.dataValue}}]}},MODBUSTCP:{name:"Modbus TCP",type:"all",group:"PROTOCOL",component:"ModbusTcpProperties",details:{resource:{name:"地址",value:function(e){return"".concat(e.properties.ip,":").concat(e.properties.port)}},rule:[{name:"地址",value:function(e){return"".concat(e.properties.ip,":").concat(e.properties.port)}},{name:"读取点位",value:function(e){return e.properties.points?e.properties.points.length:void 0}},{name:"启动延迟",value:function(e){return e.properties.initialDelay?"".concat(e.properties.initialDelay).concat(o["b"][e.properties.initialDelayUnit]):void 0}},{name:"Cron表达式",value:function(e){return e.properties.cronExpression}},{name:"数据地址",value:function(e){return e.properties.address}},{name:"数据值",value:function(e){return e.properties.dataValue}}]}},REDIS:{name:"Redis",type:"all",group:"DATABASE",component:"RedisProperties",details:{resource:{name:"地址",value:function(e){return"STANDALONE"===e.properties.mode?"".concat(e.properties.ip,":").concat(e.properties.port):"".concat(e.properties.nodes)}},rule:[{name:"地址",value:function(e){return"STANDALONE"===e.properties.mode?"".concat(e.properties.ip,":").concat(e.properties.port):"".concat(e.properties.nodes)}},{name:"执行命令",value:function(e){return"".concat(e.properties.command)}},{name:"启动延迟",value:function(e){return e.properties.initialDelay?"".concat(e.properties.initialDelay).concat(o["b"][e.properties.initialDelayUnit]):void 0}},{name:"Cron表达式",value:function(e){return e.properties.cronExpression}}]}}};function i(){var e={};for(var r in n)e[r]=n[r].component;return e}var s=i();function p(){var e={};for(var r in n)e[r]=n[r].name;return e}var c=p();function l(e){var r=[];for(var t in a){var o=u(e,t);o&&0!==o.length&&r.push({group:a[t],list:o})}return r}function u(e,r){var t=[];for(var o in n){var a=n[o];if((!e||a.type===e||"all"===a.type)&&(!r||a.group===r)){var i={name:a.name,type:a.type,code:o};t.push(i)}}return t}var d=l(void 0),m={name:"",value:""};function f(e,r){if(!e||!e.resourceType)return"resource"===r?m:[m];var t=n[e.resourceType],o=t.details[r];return"resource"===r?v(o,e):o.map((function(r){return v(r,e)})).filter((function(e){return e.name&&e.value}))}function v(e,r){var t="string"===typeof e.name?e.name:e.name(r);if(!t)return m;var o="string"===typeof e.value?e.value:e.value(r);return o?{name:t,value:o}:m}},6571:function(e,r,t){var o={"./ActiveMQProperties.vue":["bb44","chunk-2d21a3b6"],"./JdbcProperties.vue":["5b46","chunk-2d0d2f05"],"./KafkaProperties.vue":["a92f","chunk-2d209562"],"./ModbusTcpProperties.vue":["6d33","chunk-2d0daac4"],"./MqttProperties.vue":["f9de","chunk-2d22e14a"],"./OpcUAProperties.vue":["8d63","chunk-2d0e93df"],"./RabbitMQProperties.vue":["5eac","chunk-2d0d3fe8"],"./RedisProperties.vue":["d11f","chunk-2d21d458"],"./RocketMQProperties.vue":["9f0e","chunk-2d0f0f38"],"./SnmpProperties.vue":["afac","chunk-2d2143fd"]};function a(e){if(!t.o(o,e))return Promise.resolve().then((function(){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}));var r=o[e],a=r[0];return t.e(r[1]).then((function(){return t(a)}))}a.keys=function(){return Object.keys(o)},a.id="6571",e.exports=a},"995a":function(e,r,t){"use strict";t.d(r,"b",(function(){return o})),t.d(r,"a",(function(){return n}));var o={MILLIS:"毫秒",SECONDS:"秒",MINUTES:"分钟",HOURS:"小时",DAYS:"天",WEEKS:"周",MONTHS:"月",YEARS:"年"};function a(){var e=[];for(var r in o)e.push({name:o[r],value:r});return e}var n=a()},f6ed:function(e,r,t){"use strict";var o=function(){var e=this,r=e._self._c;return r("div",[r("a-select",{attrs:{placeholder:"请选择或新建资源"},on:{change:e.changeResource},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return r("div",{},[r("v-nodes",{attrs:{vnodes:t}}),r("a-divider",{staticStyle:{margin:"4px 0"}}),r("div",{staticStyle:{padding:"4px 8px 8px 8px",cursor:"pointer","text-align":"center"},on:{mousedown:function(e){return e.preventDefault()},click:e.addResource}},[r("a-icon",{attrs:{type:"plus"}}),e._v(" 新建资源 ")],1)],1)}}]),model:{value:e.internalValue,callback:function(r){e.internalValue=r},expression:"internalValue"}},e._l(e.resourceList,(function(t,o){return r("a-select-option",{key:o,attrs:{value:t.resourceId}},[e._v(" "+e._s(t.resourceName)+" ")])})),1),e.resourceType?r("node-resource-model",{ref:"NodeResourceModel",on:{ok:e.onAddSuccess}}):e._e()],1)},a=[],n=(t("7db0"),t("d3b7"),function(){var e=this,r=e._self._c;return r("a-modal",{attrs:{confirmLoading:e.confirmLoading,title:"新建资源",width:600,zIndex:1100,maskClosable:!1,visible:e.visible,destroyOnClose:!0},on:{cancel:e.onClose}},[r("a-form-model",{ref:"ruleForm",attrs:{model:e.modal,layout:"vertical",rules:e.rules}},[r("a-row",{attrs:{gutter:24}},[r("a-col",{attrs:{span:24}},[r("a-form-model-item",{attrs:{label:"资源名称",prop:"resourceName"}},[r("a-input",{attrs:{placeholder:"请输入资源名称"},model:{value:e.modal.resourceName,callback:function(r){e.$set(e.modal,"resourceName",r)},expression:"modal.resourceName"}})],1)],1)],1),e.resourceComponent?r(e.resourceComponent,{ref:"PropertiesModal",tag:"component"}):e._e()],1),r("template",{slot:"footer"},[r("a-space",[r("a-button",{staticStyle:{width:"75px"},on:{click:e.testDriver}},[e._v(" 测试")]),r("a-button",{staticStyle:{width:"75px"},on:{click:e.onClose}},[e._v(" 取消")]),r("a-button",{staticStyle:{width:"75px"},attrs:{type:"primary"},on:{click:e.handleOk}},[e._v(" 保存")])],1)],1)],2)}),i=[],s=(t("3ca3"),t("ddb0"),t("ac1f"),t("0fea")),p=t("56fc"),c=t("a026"),l=t("ca00"),u={name:"NodeResourceModel",data:function(){return{title:"操作",visible:!1,confirmLoading:!1,modal:{},url:{add:"/api/resource/add",test:"/api/resource/test"},rules:{resourceName:[{required:!0,message:"请输入资源名称",trigger:"blur"}]},resourceComponent:void 0,resourceComponentMap:p["b"]}},methods:{add:function(e){this.modal={resourceType:e,resourceName:e.toLowerCase()+"_"+Object(l["d"])(5)},this.importComponent(e),this.visible=!0},importComponent:function(e){var r=this;t("6571")("./"+this.resourceComponentMap[e]+".vue").then((function(e){r.resourceComponent=c["a"].extend(e.default)}))},onClose:function(){this.modal={},this.resourceComponent=void 0,this.visible=!1},handleOk:function(){var e=this,r=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;e.$refs.PropertiesModal.get((function(e,t){if(!e)return!1;r.confirmLoading=!0,r.modal.properties=t,Object(s["d"])(r.url.add,r.modal).then((function(e){200===e.code?(r.$message.success("保存成功"),r.$emit("ok",e.data.resourceId)):r.$message.error("保存失败")})).finally((function(){r.confirmLoading=!1,r.onClose()}))}))}))},testDriver:function(){var e=this;this.$refs.PropertiesModal.get((function(r,t){if(!r)return!1;e.modal.properties=t,Object(s["d"])(e.url.test,e.modal).then((function(r){200===r.code&&!0===r.data?e.$message.success("资源可用"):e.$message.error("资源不可用")}))}))}}},d=u,m=t("2877"),f=Object(m["a"])(d,n,i,!1,null,"303be33f",null),v=f.exports,h={components:{NodeResourceModel:v,VNodes:{functional:!0,render:function(e,r){return r.props.vnodes}}},props:{resourceType:{type:String},value:{type:String}},data:function(){return{internalValue:void 0,resourceList:[],url:{resourceList:"/api/resource/list"}}},mounted:function(){var e=this;Object(s["d"])(this.url.resourceList,{resourceType:this.resourceType}).then((function(r){e.resourceList=r.data}))},watch:{value:function(e){this.internalValue=e}},methods:{addResource:function(){this.$refs.NodeResourceModel.add(this.resourceType)},onAddSuccess:function(e){var r=this;Object(s["d"])(this.url.resourceList,{resourceType:this.resourceType}).then((function(t){r.resourceList=t.data,r.internalValue=e,r.changeResource()}))},changeResource:function(){var e=this;this.$emit("input",this.internalValue);var r=this.resourceList.find((function(r){return r.resourceId===e.internalValue}));this.$emit("change",r)}}},b=h,y=Object(m["a"])(b,o,a,!1,null,null,null);r["a"]=y.exports}}]);